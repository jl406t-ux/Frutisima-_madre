<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FRUT√çSIMA MADRE</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700;800&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

<style>
:root{
  --primary:#22c55e;
  --primary2:#16a34a;
  --dark:#0f172a;
  --danger:#ef4444;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:Inter,system-ui;
  background:#f6f7f9;
  padding:18px;
  padding-bottom:120px; /* ‚úÖ espacio para FAB */
}

.container{max-width:1100px;margin:auto}

header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:15px;
}

.brand img{
  width:260px;
}

.icon-btn{
  background:white;
  border-radius:14px;
  padding:10px 14px;
  border:1px solid #ddd;
  font-weight:800;
  cursor:pointer;
}

.pill{
  background:#22c55e22;
  padding:4px 8px;
  border-radius:999px;
}

/* PUBLICIDAD */
.ad{
  border-radius:18px;
  overflow:hidden;
  margin-bottom:18px;
  position:relative;
}
.ad img{
  width:100%;
  height:240px;
  object-fit:cover;
}
.ad-text{
  position:absolute;
  bottom:15px;
  left:15px;
  right:15px;
  color:white;
  font-weight:900;
  font-size:16px;
}

/* PRODUCTOS */
.grid{
  display:grid;
  gap:18px;
}

@media(min-width:768px){
  .grid{grid-template-columns:1fr 1fr;}
}

.card{
  background:white;
  border-radius:18px;
  overflow:hidden;
  box-shadow:0 8px 20px rgba(0,0,0,.05);
}

.card img{
  width:100%;
  height:200px;
  object-fit:cover;
}

.content{padding:14px}

label{font-weight:800;font-size:13px}

select,input,textarea{
  width:100%;
  margin-top:6px;
  margin-bottom:10px;
  padding:10px;
  border-radius:10px;
  border:1px solid #ddd;
}

textarea{resize:none}

.btn{
  width:100%;
  padding:14px;
  border:none;
  border-radius:14px;
  font-weight:900;
  cursor:pointer;
}

.add{
  background:linear-gradient(135deg,var(--dark),#111);
  color:white;
}

/* DRAWER */
.overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.5);
  display:none;
}

.drawer{
  position:fixed;
  top:0;
  right:0;
  width:90%;
  max-width:420px;
  height:100%;
  background:white;
  transform:translateX(100%);
  transition:.3s;
  display:flex;
  flex-direction:column;
}

.drawer.open{transform:translateX(0)}
.overlay.open{display:block}

.drawer-body{
  padding:15px;
  overflow:auto;
  flex:1;
}

.item{
  background:#f9f9f9;
  padding:10px;
  border-radius:12px;
  margin-bottom:10px;
}

.totals{
  margin-top:15px;
  font-weight:900;
}

.btn-wa{
  background:linear-gradient(135deg,var(--primary),var(--primary2));
  color:black;
}

.btn-danger{
  background:linear-gradient(135deg,#ef4444,#dc2626);
  color:white;
}

/* FAB */
.fab{
  position:fixed;
  bottom:calc(14px + env(safe-area-inset-bottom));
  left:50%;
  transform:translateX(-50%);
  background:white;
  padding:12px 18px;
  border-radius:999px;
  box-shadow:0 10px 30px rgba(0,0,0,.2);
  display:flex;
  gap:15px;
  align-items:center;
  cursor:pointer;
}
.fab-hide{display:none}
</style>
</head>

<body>
<div class="container">

<header>
  <div class="brand">
    <img src="logo.jpg">
  </div>
  <button class="icon-btn" onclick="openCart()">
    üß∫ Carrito <span class="pill" id="headerCount">0</span>
  </button>
</header>

<section class="ad">
  <img src="tostittos.jpg">
  <div class="ad-text">
    Este Mi√©rcoles de Ceniza y todos los viernes prueba nuestras botanas con aguachile de camar√≥n
  </div>
</section>

<div class="grid">

<!-- FRUTA -->
<div class="card" id="prod-fruta">
  <img src="fruta.jpg">
  <div class="content">
    <h3>üçâ Fruta preparada</h3>

    <label>Tama√±o</label>
    <select data-field="size">
      <option>Chico ($35)</option>
      <option>Mediano ($45)</option>
      <option>Grande ($60)</option>
    </select>

    <label>Frutas</label>
    <div>
      <input type="checkbox" data-field="fruit" value="Mango"> Mango (+$10)<br>
      <input type="checkbox" data-field="fruit" value="Sand√≠a"> Sand√≠a<br>
      <input type="checkbox" data-field="fruit" value="Pi√±a"> Pi√±a
    </div>

    <label>Cantidad</label>
    <input type="number" data-field="qty" value="1" min="1">

    <button class="btn add" onclick="addToCart('Fruta preparada','prod-fruta',true,true)">Agregar</button>
  </div>
</div>

<!-- DORILOCOS -->
<div class="card" id="prod-dori">
  <img src="dorilocos.jpg">
  <div class="content">
    <h3>üå∂Ô∏è Dorilocos</h3>

    <label>Extras</label>
    <div>
      <input type="checkbox" data-field="extra" value="Aguachile de camar√≥n"> Aguachile de camar√≥n (+$40) (solo viernes)
    </div>

    <label>Cantidad</label>
    <input type="number" data-field="qty" value="1" min="1">

    <button class="btn add" onclick="addToCart('Dorilocos','prod-dori',false,false)">Agregar</button>
  </div>
</div>

</div>
</div>

<!-- DRAWER -->
<div id="overlay" class="overlay" onclick="closeCart()"></div>

<div id="drawer" class="drawer">
  <div class="drawer-body">
    <div id="cartList"></div>

    <div class="totals">
      Subtotal: <span id="subtotalVal">$0</span><br>
      Total: <span id="totalVal">$0</span>
    </div>

    <button class="btn btn-wa" onclick="checkoutWhatsApp()">Enviar por WhatsApp</button>
    <button class="btn btn-danger" onclick="clearCart()">Vaciar</button>
  </div>
</div>

<!-- FAB -->
<div id="fab" class="fab fab-hide" onclick="openCart()">
  üß∫ <span id="fabCount">0</span> | $<span id="fabMoney">0</span>
</div>

<script>
const WA_NUMBER="5214774961901";
let cart=[];

function openCart(){
  document.getElementById("drawer").classList.add("open");
  document.getElementById("overlay").classList.add("open");
}
function closeCart(){
  document.getElementById("drawer").classList.remove("open");
  document.getElementById("overlay").classList.remove("open");
}

function getValues(rootId,field){
  const root=document.getElementById(rootId);
  return [...root.querySelectorAll(`[data-field="${field}"]:checked`)].map(x=>x.value);
}
function getInputValue(rootId,field){
  return document.getElementById(rootId).querySelector(`[data-field="${field}"]`).value;
}

function addToCart(product,rootId,hasSize,hasFruits){

  const qty=parseInt(getInputValue(rootId,"qty"));
  const size=hasSize?getInputValue(rootId,"size"):"";
  const fruits=hasFruits?getValues(rootId,"fruit"):[];
  const extras=getValues(rootId,"extra");

  let base=0;
  if(product==="Fruta preparada"){
    if(size.includes("35")) base=35;
    if(size.includes("45")) base=45;
    if(size.includes("60")) base=60;
  }else base=50;

  if(fruits.includes("Mango")) base+=10;
  if(extras.includes("Aguachile de camar√≥n")) base+=40;

  cart.push({product,qty,size,fruits,extras,unit:base});
  renderCart();
}

function renderCart(){
  const list=document.getElementById("cartList");
  list.innerHTML="";
  let subtotal=0;

  cart.forEach(item=>{
    const sub=item.unit*item.qty;
    subtotal+=sub;
    list.innerHTML+=`
      <div class="item">
        ${item.qty}x ${item.product}<br>
        Subtotal: $${sub}
      </div>`;
  });

  document.getElementById("subtotalVal").innerText="$"+subtotal;
  document.getElementById("totalVal").innerText="$"+subtotal;

  document.getElementById("headerCount").innerText=cart.length;
  document.getElementById("fabCount").innerText=cart.length;
  document.getElementById("fabMoney").innerText=subtotal;

  document.getElementById("fab").classList.toggle("fab-hide",cart.length===0);
}

function clearCart(){cart=[];renderCart();}

function checkoutWhatsApp(){
  if(cart.length===0)return;
  let subtotal=cart.reduce((a,b)=>a+b.unit*b.qty,0);

  let msg="Hola quiero pedir:\n\n";
  cart.forEach((item,i)=>{
    msg+=`${i+1}) ${item.qty}x ${item.product}\nSubtotal: $${item.unit*item.qty}\n\n`;
  });
  msg+=`TOTAL: $${subtotal}`;

  window.location.href=`https://wa.me/${WA_NUMBER}?text=${encodeURIComponent(msg)}`;
}
</script>

</body>
</html>
