<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FRUT√çSIMA MADRE</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&family=Inter:wght@400;500&display=swap" rel="stylesheet">

<style>
body{margin:0;font-family:Inter,Arial,sans-serif;background:#f6f7f9;padding:16px}
header{max-width:900px;margin:0 auto 16px;display:flex;justify-content:center}
header img{max-width:260px;width:70%;height:auto}
h1,h2,h3{font-family:Poppins,Arial,sans-serif}
h1{text-align:center;margin:8px 0}
h2{text-align:center;color:#555;margin-top:4px;font-weight:600}

.wrap{max-width:900px;margin:auto;display:grid;grid-template-columns:1fr;gap:16px}
@media(min-width:980px){.wrap{grid-template-columns:1.4fr .9fr}.cart{position:sticky;top:12px}}

.card{background:#fff;border-radius:14px;box-shadow:0 4px 14px rgba(0,0,0,.08);overflow:hidden;border:1px solid #eee}
.card img{width:100%;height:220px;object-fit:cover}
.content{padding:14px}
.top{display:flex;justify-content:space-between;align-items:center;gap:10px}
.badge{background:#ef4444;color:#fff;padding:6px 10px;border-radius:999px;font-size:12px;font-weight:700;white-space:nowrap}

label{display:block;margin-top:10px;font-weight:700;font-size:14px}
select,input,textarea{width:100%;margin-top:6px;padding:10px;border-radius:10px;border:1px solid #ccc;box-sizing:border-box}
textarea{resize:vertical;min-height:70px}
.group{margin-top:6px}
.group label{font-weight:500;margin-top:6px}

.btn{width:100%;margin-top:12px;padding:14px;border:none;border-radius:12px;font-size:16px;font-weight:800;cursor:pointer}
.add{background:#0f172a;color:#fff}
.wa{background:#22c55e;color:#000}
.danger{background:#ef4444;color:#fff}

.cart-list{margin-top:10px;display:flex;flex-direction:column;gap:10px}
.item{border:1px solid #eee;border-radius:10px;padding:10px;background:#fff}
.item-top{display:flex;justify-content:space-between;align-items:flex-start;gap:10px}
.muted{font-size:12px;color:#666;margin-top:6px}
.mini{padding:6px 10px;border-radius:8px;border:1px solid #ccc;cursor:pointer;background:#fafafa}
.divider{height:1px;background:#eee;margin:12px 0}

.totals{
  border:1px dashed #ddd;
  border-radius:12px;
  padding:10px;
  margin-top:10px;
  background:#fafafa;
  font-size:14px;
}
.trow{display:flex;justify-content:space-between;gap:10px;margin:6px 0}
.trow strong{font-family:Poppins,Arial,sans-serif}
.note{
  margin-top:8px;
  padding:10px;
  border-radius:10px;
  background:#fff7ed;
  border:1px solid #fed7aa;
  font-size:13px;
}

/* MAPA */
.map-card{background:#fff;border-radius:14px;box-shadow:0 4px 14px rgba(0,0,0,.08);overflow:hidden;margin:18px auto 8px;max-width:900px;border:1px solid #eee}
.map-title{padding:12px 14px;font-family:Poppins,Arial,sans-serif;font-weight:700}
.map-embed{width:100%;height:360px;border:0}
.map-actions{padding:12px 14px 16px;font-size:14px}
.map-actions a{display:inline-block;margin-top:8px;text-decoration:none;font-weight:800}

/* BOT√ìN FLOTANTE TOTAL */
.fab{
  position:fixed;
  right:16px;
  bottom:16px;
  z-index:9999;
  display:flex;
  align-items:center;
  gap:10px;
  padding:12px 14px;
  border-radius:999px;
  border:1px solid #e5e7eb;
  box-shadow:0 10px 24px rgba(0,0,0,.18);
  background:#ffffff;
  cursor:pointer;
  user-select:none;
}
.fab strong{font-family:Poppins, Arial, sans-serif}
.fab .pill{
  background:#0f172a;
  color:#fff;
  padding:6px 10px;
  border-radius:999px;
  font-weight:800;
  font-size:12px;
}
.fab .money{font-weight:900;font-size:14px}
.fab .muted2{font-size:12px;color:#6b7280;margin-top:2px}
.fab .stack{display:flex;flex-direction:column;line-height:1.1}
.fab-hide{display:none}
</style>
</head>

<body>

<header>
  <img src="logo.jpg" alt="Frut√≠sima Madre">
</header>

<h1>Men√∫</h1>
<h2>Arma tu pedido y env√≠alo por WhatsApp</h2>

<div class="wrap">

  <!-- PRODUCTOS -->
  <div class="products">

    <!-- 1) FRUTA PREPARADA -->
    <div class="card" id="prod-fruta">
      <img src="fruta.jpg" alt="Fruta preparada">
      <div class="content">
        <div class="top">
          <h3 style="margin:0">üçâ Fruta preparada</h3>
        </div>

        <label>Tama√±o</label>
        <select data-field="size">
          <option>Chico ($35)</option>
          <option>Mediano ($45)</option>
          <option>Grande ($60)</option>
        </select>

        <label>Frutas</label>
        <div class="group">
          <label><input type="checkbox" data-field="fruit" value="Sand√≠a"> Sand√≠a</label>
          <label><input type="checkbox" data-field="fruit" value="Pi√±a"> Pi√±a</label>
          <label><input type="checkbox" data-field="fruit" value="Mango"> Mango (+$10)</label>
          <label><input type="checkbox" data-field="fruit" value="Mel√≥n chino"> Mel√≥n chino</label>
          <label><input type="checkbox" data-field="fruit" value="Mel√≥n verde"> Mel√≥n verde</label>
          <label><input type="checkbox" data-field="fruit" value="Pepino"> Pepino</label>
          <label><input type="checkbox" data-field="fruit" value="J√≠cama"> J√≠cama</label>
        </div>

        <label>Extras</label>
        <div class="group">
          <label><input type="checkbox" data-field="extra" value="Chile Miguelito"> Chile Miguelito</label>
          <label><input type="checkbox" data-field="extra" value="Chile pica"> Chile pica</label>
          <label><input type="checkbox" data-field="extra" value="Chile no pica"> Chile no pica</label>
          <label><input type="checkbox" data-field="extra" value="Queso rallado"> Queso rallado</label>
          <label><input type="checkbox" data-field="extra" value="Lim√≥n"> Lim√≥n</label>
          <label><input type="checkbox" data-field="extra" value="Chamoy de jamaica"> Chamoy de jamaica</label>
        </div>

        <label>Cantidad</label>
        <input type="number" data-field="qty" value="1" min="1">

        <label>Observaciones</label>
        <textarea data-field="notes" placeholder="Ej: sin queso, m√°s chamoy..."></textarea>

        <button class="btn add" type="button" onclick="addToCart('Fruta preparada','prod-fruta',true,true)">‚ûï Agregar</button>
      </div>
    </div>

    <!-- 2) CALDO DE OSO -->
    <div class="card" id="prod-caldo" style="margin-top:16px">
      <img src="caldo.jpg" alt="Caldo de oso">
      <div class="content">
        <div class="top">
          <h3 style="margin:0">üç∫ Caldo de oso</h3>
        </div>

        <label>Tama√±o</label>
        <select data-field="size">
          <option>Chico ($40)</option>
          <option>Grande ($60)</option>
        </select>

        <label>Frutas</label>
        <div class="group">
          <label><input type="checkbox" data-field="fruit" value="Sand√≠a"> Sand√≠a</label>
          <label><input type="checkbox" data-field="fruit" value="Pi√±a"> Pi√±a</label>
          <label><input type="checkbox" data-field="fruit" value="Mango"> Mango (+$10)</label>
          <label><input type="checkbox" data-field="fruit" value="Mel√≥n chino"> Mel√≥n chino</label>
          <label><input type="checkbox" data-field="fruit" value="Mel√≥n verde"> Mel√≥n verde</label>
          <label><input type="checkbox" data-field="fruit" value="Pepino"> Pepino</label>
          <label><input type="checkbox" data-field="fruit" value="J√≠cama"> J√≠cama</label>
        </div>

        <label>Extras</label>
        <div class="group">
          <label><input type="checkbox" data-field="extra" value="Vinagre de pi√±a"> Vinagre de pi√±a</label>
          <label><input type="checkbox" data-field="extra" value="Camar√≥n seco"> Camar√≥n seco (+$10)</label>
          <label><input type="checkbox" data-field="extra" value="Chile pica"> Chile pica</label>
          <label><input type="checkbox" data-field="extra" value="Chile no pica"> Chile no pica</label>
          <label><input type="checkbox" data-field="extra" value="Queso rallado"> Queso rallado</label>
          <label><input type="checkbox" data-field="extra" value="Lim√≥n"> Lim√≥n</label>
        </div>

        <label>Cantidad</label>
        <input type="number" data-field="qty" value="1" min="1">

        <label>Observaciones</label>
        <textarea data-field="notes" placeholder="Ej: con mucho vinagre..."></textarea>

        <button class="btn add" type="button" onclick="addToCart('Caldo de oso','prod-caldo',true,true)">‚ûï Agregar</button>
      </div>
    </div>

    <!-- 3) DORILOCOS -->
    <div class="card" id="prod-dori" style="margin-top:16px">
      <img src="dorilocos.jpg" alt="Dorilocos">
      <div class="content">
        <div class="top">
          <h3 style="margin:0">üå∂Ô∏è Dorilocos</h3>
          <span class="badge">$50</span>
        </div>

        <label>Extras</label>
        <div class="group">
          <label><input type="checkbox" data-field="extra" value="Cacahuate japon√©s"> Cacahuate japon√©s</label>
          <label><input type="checkbox" data-field="extra" value="Cacahuate salado"> Cacahuate salado</label>
          <label><input type="checkbox" data-field="extra" value="Churrito rojo"> Churrito rojo</label>
          <label><input type="checkbox" data-field="extra" value="Cueritos"> Cueritos</label>
          <label><input type="checkbox" data-field="extra" value="Pepino"> Pepino</label>
          <label><input type="checkbox" data-field="extra" value="J√≠cama"> J√≠cama</label>
          <label><input type="checkbox" data-field="extra" value="Lim√≥n"> Lim√≥n</label>
          <label><input type="checkbox" data-field="extra" value="Salsa Don Vasco"> Salsa Don Vasco</label>
          <label><input type="checkbox" data-field="extra" value="Salsa pico de gallo"> Salsa pico de gallo</label>
          <label><input type="checkbox" data-field="extra" value="Salsa negra"> Salsa negra</label>
          <label><input type="checkbox" data-field="extra" value="Chamoy de jamaica"> Chamoy de jamaica</label>
          <label><input type="checkbox" data-field="extra" value="Chile pica"> Chile pica</label>
          <label><input type="checkbox" data-field="extra" value="Chile no pica"> Chile no pica</label>
          <label><input type="checkbox" data-field="extra" value="Queso rallado"> Queso rallado</label>
          <label><input type="checkbox" data-field="extra" value="Aguachile de camar√≥n"> Aguachile de camar√≥n (+$30) (Mi√©rcoles de Ceniza y Viernes de Cuaresma)</label>
        </div>

        <label>Cantidad</label>
        <input type="number" data-field="qty" value="1" min="1">

        <label>Observaciones</label>
        <textarea data-field="notes" placeholder="Ej: bien picoso..."></textarea>

        <button class="btn add" type="button" onclick="addToCart('Dorilocos','prod-dori',false,false)">‚ûï Agregar</button>
      </div>
    </div>

    <!-- 4) TOSTITOS -->
    <div class="card" id="prod-tostitos" style="margin-top:16px">
      <img src="tostitos.jpg" alt="Tostitos">
      <div class="content">
        <div class="top">
          <h3 style="margin:0">üü® Tostitos</h3>
          <span class="badge">$50</span>
        </div>

        <label>Extras</label>
        <div class="group">
          <label><input type="checkbox" data-field="extra" value="Cacahuate japon√©s"> Cacahuate japon√©s</label>
          <label><input type="checkbox" data-field="extra" value="Cacahuate salado"> Cacahuate salado</label>
          <label><input type="checkbox" data-field="extra" value="Churrito rojo"> Churrito rojo</label>
          <label><input type="checkbox" data-field="extra" value="Cueritos"> Cueritos</label>
          <label><input type="checkbox" data-field="extra" value="Pepino"> Pepino</label>
          <label><input type="checkbox" data-field="extra" value="J√≠cama"> J√≠cama</label>
          <label><input type="checkbox" data-field="extra" value="Lim√≥n"> Lim√≥n</label>
          <label><input type="checkbox" data-field="extra" value="Salsa Don Vasco"> Salsa Don Vasco</label>
          <label><input type="checkbox" data-field="extra" value="Salsa pico de gallo"> Salsa pico de gallo</label>
          <label><input type="checkbox" data-field="extra" value="Salsa negra"> Salsa negra</label>
          <label><input type="checkbox" data-field="extra" value="Chamoy de jamaica"> Chamoy de jamaica</label>
          <label><input type="checkbox" data-field="extra" value="Chile pica"> Chile pica</label>
          <label><input type="checkbox" data-field="extra" value="Chile no pica"> Chile no pica</label>
          <label><input type="checkbox" data-field="extra" value="Queso rallado"> Queso rallado</label>
          <label><input type="checkbox" data-field="extra" value="Aguachile de camar√≥n"> Aguachile de camar√≥n (+$30) (Mi√©rcoles de Ceniza y Viernes de Cuaresma)</label>
        </div>

        <label>Cantidad</label>
        <input type="number" data-field="qty" value="1" min="1">

        <label>Observaciones</label>
        <textarea data-field="notes" placeholder="Ej: con mucho queso..."></textarea>

        <button class="btn add" type="button" onclick="addToCart('Tostitos','prod-tostitos',false,false)">‚ûï Agregar</button>
      </div>
    </div>

    <!-- 5) PAPAS LOCAS -->
    <div class="card" id="prod-papas" style="margin-top:16px">
      <img src="papas.jpg" alt="Papas locas">
      <div class="content">
        <div class="top">
          <h3 style="margin:0">ü•î Papas locas</h3>
          <span class="badge">$50</span>
        </div>

        <label>Extras</label>
        <div class="group">
          <label><input type="checkbox" data-field="extra" value="Cacahuate japon√©s"> Cacahuate japon√©s</label>
          <label><input type="checkbox" data-field="extra" value="Cacahuate salado"> Cacahuate salado</label>
          <label><input type="checkbox" data-field="extra" value="Churrito rojo"> Churrito rojo</label>
          <label><input type="checkbox" data-field="extra" value="Cueritos"> Cueritos</label>
          <label><input type="checkbox" data-field="extra" value="Pepino"> Pepino</label>
          <label><input type="checkbox" data-field="extra" value="J√≠cama"> J√≠cama</label>
          <label><input type="checkbox" data-field="extra" value="Lim√≥n"> Lim√≥n</label>
          <label><input type="checkbox" data-field="extra" value="Salsa Don Vasco"> Salsa Don Vasco</label>
          <label><input type="checkbox" data-field="extra" value="Salsa negra"> Salsa negra</label>
          <label><input type="checkbox" data-field="extra" value="Chamoy de jamaica"> Chamoy de jamaica</label>
          <label><input type="checkbox" data-field="extra" value="Chile pica"> Chile pica</label>
          <label><input type="checkbox" data-field="extra" value="Chile no pica"> Chile no pica</label>
          <label><input type="checkbox" data-field="extra" value="Queso rallado"> Queso rallado</label>
          <label><input type="checkbox" data-field="extra" value="Aguachile de camar√≥n"> Aguachile de camar√≥n (+$30) (Mi√©rcoles de Ceniza y Viernes de Cuaresma)</label>
        </div>

        <label>Cantidad</label>
        <input type="number" data-field="qty" value="1" min="1">

        <label>Observaciones</label>
        <textarea data-field="notes" placeholder="Ej: sin cueritos..."></textarea>

        <button class="btn add" type="button" onclick="addToCart('Papas locas','prod-papas',false,false)">‚ûï Agregar</button>
      </div>
    </div>

  </div>

  <!-- CARRITO -->
  <div class="card cart">
    <div class="content">
      <div class="top">
        <h3 style="margin:0">üß∫ Tu pedido</h3>
        <span class="badge" id="cartCount">0 productos</span>
      </div>

      <div class="muted">Agrega productos y al final manda todo por WhatsApp.</div>
      <div class="cart-list" id="cartList"></div>

      <div class="divider"></div>

      <label>Nombre (opcional)</label>
      <input type="text" id="customerName" placeholder="Ej: Juan / Carlos">

      <label>Observaciones generales (opcional)</label>
      <textarea id="generalNotes" placeholder="Ej: voy por √©l en 10 min, para llevar..."></textarea>

      <label style="margin-top:12px;font-weight:800">
        <input type="checkbox" id="deliveryCheck" onchange="toggleDeliveryNote()">
        A domicilio
      </label>
      <div id="deliveryNote" class="note" style="display:none">
        üöö Revisar las tarifas de env√≠o seg√∫n la zona.
      </div>

      <div class="totals">
        <div class="trow"><span>Subtotal</span><strong id="subtotalVal">$0</strong></div>
        <div class="trow"><span>Total</span><strong id="totalVal">$0</strong></div>
        <div class="muted">* El env√≠o se confirma por WhatsApp seg√∫n la zona.</div>
      </div>

      <button class="btn wa" type="button" onclick="checkoutWhatsApp()">üì≤ Realizar pedido por WhatsApp</button>
      <button class="btn danger" type="button" onclick="clearCart()">üóëÔ∏è Vaciar carrito</button>
    </div>
  </div>

</div>

<!-- MAPA -->
<div class="map-card">
  <div class="map-title">üìç Ubicaci√≥n</div>
  <iframe class="map-embed" loading="lazy" referrerpolicy="no-referrer-when-downgrade"
    src="https://maps.google.com/maps?q=21.1439,-101.6533&z=17&output=embed"></iframe>
  <div class="map-actions">
    <b>Direcci√≥n:</b> Blvd. Hilario Medina 4613, Unidad Deportiva, 37237 Le√≥n de los Aldama, Gto.<br>
    <a target="_blank" rel="noopener" href="https://www.google.com/maps/search/?api=1&query=21.1439,-101.6533">Abrir ubicaci√≥n</a>
    <br>
    <a target="_blank" rel="noopener" href="https://www.google.com/maps/dir/?api=1&destination=21.1439,-101.6533&travelmode=driving">C√≥mo llegar</a>
  </div>
</div>

<!-- BOT√ìN FLOTANTE TOTAL -->
<div id="fabTotal" class="fab fab-hide" onclick="goToCart()">
  <span class="pill" id="fabCount">0</span>
  <div class="stack">
    <div><strong>Total</strong> <span class="money" id="fabMoney">$0</span></div>
    <div class="muted2">Toca para ver carrito</div>
  </div>
</div>

<script>
  const WA_NUMBER = "5214774961901";
  const EXTRA_CAMARON_SECO = "Camar√≥n seco";
  const EXTRA_AGUACHILE = "Aguachile de camar√≥n";
  let cart = [];

  function qsa(root, sel){ return Array.from(root.querySelectorAll(sel)); }
  function getValues(rootId, field){
    const root = document.getElementById(rootId);
    return qsa(root, `[data-field="${field}"]:checked`).map(x => x.value);
  }
  function getInputValue(rootId, field){
    const root = document.getElementById(rootId);
    const el = root.querySelector(`[data-field="${field}"]`);
    return el ? el.value : "";
  }

  function computeBasePrice(productName, sizeText){
    let price = 0;
    if(productName === "Fruta preparada"){
      if(sizeText.includes("Chico")) price = 35;
      else if(sizeText.includes("Mediano")) price = 45;
      else if(sizeText.includes("Grande")) price = 60;
    } else if(productName === "Caldo de oso"){
      if(sizeText.includes("Chico")) price = 40;
      else if(sizeText.includes("Grande")) price = 60;
    } else if(productName === "Dorilocos" || productName === "Papas locas" || productName === "Tostitos"){
      price = 50;
    }
    return price;
  }

  function formatMoney(n){ return "$" + Math.round(n); }

  function toggleDeliveryNote(){
    const isChecked = document.getElementById("deliveryCheck").checked;
    document.getElementById("deliveryNote").style.display = isChecked ? "block" : "none";
  }

  function goToCart(){
    const cartEl = document.querySelector(".cart");
    if(cartEl) cartEl.scrollIntoView({behavior:"smooth", block:"start"});
  }

  function updateFab(total){
    const fab = document.getElementById("fabTotal");
    const count = document.getElementById("fabCount");
    const money = document.getElementById("fabMoney");
    if(cart.length === 0){
      fab.classList.add("fab-hide");
      count.textContent = "0";
      money.textContent = "$0";
      return;
    }
    fab.classList.remove("fab-hide");
    count.textContent = String(cart.length);
    money.textContent = formatMoney(total);
  }

  function addToCart(product, rootId, hasSize, hasFruits){
    const size = hasSize ? getInputValue(rootId, "size") : "";
    const qty = Math.max(1, parseInt(getInputValue(rootId, "qty") || "1", 10) || 1);
    const notes = (getInputValue(rootId, "notes") || "").trim();
    const fruits = hasFruits ? getValues(rootId, "fruit") : [];
    const extras = getValues(rootId, "extra");

    const baseUnit = computeBasePrice(product, size);

    const mangoSelected = fruits.includes("Mango");
    let unitPrice = baseUnit + (mangoSelected ? 10 : 0);

    if(product === "Caldo de oso" && extras.includes(EXTRA_CAMARON_SECO)) unitPrice += 10;
    if((product === "Dorilocos" || product === "Tostitos" || product === "Papas locas") && extras.includes(EXTRA_AGUACHILE)) unitPrice += 40;

    cart.push({
      id: (crypto.randomUUID ? crypto.randomUUID() : String(Date.now()) + Math.random()),
      product, size, qty, fruits, extras, notes,
      unitPrice
    });

    renderCart();
  }

  function removeItem(id){
    cart = cart.filter(x => x.id !== id);
    renderCart();
  }

  function clearCart(){
    cart = [];
    renderCart();
  }

  function computeTotals(){
    const subtotal = cart.reduce((s, it) => s + (it.unitPrice * it.qty), 0);
    const total = subtotal;
    document.getElementById("subtotalVal").textContent = formatMoney(subtotal);
    document.getElementById("totalVal").textContent = formatMoney(total);
    updateFab(total);
    return { subtotal, total };
  }

  function renderCart(){
    const list = document.getElementById("cartList");
    const count = document.getElementById("cartCount");
    count.textContent = `${cart.length} producto${cart.length===1?'':'s'}`;

    if(cart.length === 0){
      list.innerHTML = `<div class="muted">Tu carrito est√° vac√≠o. Agrega algo üëá</div>`;
      document.getElementById("subtotalVal").textContent = "$0";
      document.getElementById("totalVal").textContent = "$0";
      updateFab(0);
      return;
    }

    list.innerHTML = cart.map((it, idx) => {
      const itemSubtotal = it.unitPrice * it.qty;
      const lines = [];
      lines.push(`Subtotal: ${formatMoney(itemSubtotal)}`);
      if(it.size) lines.push(`Tama√±o: ${it.size}`);
      if(it.fruits && it.fruits.length) lines.push(`Frutas: ${it.fruits.join(", ")}`);
      lines.push(`Extras: ${(it.extras && it.extras.length) ? it.extras.join(", ") : "‚Äî"}`);
      if(it.notes) lines.push(`Obs: ${it.notes}`);

      return `
        <div class="item">
          <div class="item-top">
            <div><b>${idx+1}) x${it.qty} ${it.product}</b></div>
            <button class="mini" type="button" onclick="removeItem('${it.id}')">Quitar</button>
          </div>
          <div class="muted" style="margin-top:6px; white-space:pre-wrap">${lines.join("\n")}</div>
        </div>
      `;
    }).join("");

    computeTotals();
  }

  function cleanSizeText(size){
    return (size || "").replace(/\s*\(\$\d+\)\s*/g, "").trim();
  }

  function checkoutWhatsApp(){
    if(cart.length === 0){
      alert("Tu carrito est√° vac√≠o. Agrega al menos un producto.");
      return;
    }

    const name = (document.getElementById("customerName").value || "").trim();
    const gNotes = (document.getElementById("generalNotes").value || "").trim();
    const delivery = document.getElementById("deliveryCheck").checked;

    const totals = computeTotals();

    let msg = "Hola, quiero pedir en FRUT√çSIMA MADRE:\n";
    if(name) msg += `Nombre: ${name}\n`;
    msg += "\nüß∫ Pedido:\n";

    cart.forEach((it, i) => {
      const itemSubtotal = it.unitPrice * it.qty;

      msg += `${i+1}) x${it.qty} ${it.product}\n`;
      if(it.size) msg += `   - Tama√±o: ${cleanSizeText(it.size)}\n`;
      if(it.fruits && it.fruits.length) msg += `   - Frutas: ${it.fruits.join(", ")}\n`;
      if(it.extras && it.extras.length) msg += `   - Extras: ${it.extras.join(", ")}\n`;
      if(it.notes) msg += `   - Observaciones: ${it.notes}\n`;

      msg += `   Subtotal: ${formatMoney(itemSubtotal)}\n\n`;
    });

    msg += `üí∞ Subtotal general: ${formatMoney(totals.subtotal)}\n`;
    msg += `üí∞ Total: ${formatMoney(totals.total)}\n`;

    msg += delivery
      ? `\nüöö A domicilio: S√≠ (revisar tarifa seg√∫n zona)\n`
      : `\nüìç A domicilio: No\n`;

    if(gNotes) msg += `\nüìù Observaciones generales: ${gNotes}\n`;

    window.location.href = `https://wa.me/${WA_NUMBER}?text=${encodeURIComponent(msg)}`;
  }

  renderCart();
</script>

</body>
</html>

